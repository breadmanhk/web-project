<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Member Registration - CineMax Theatre</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Open+Sans:wght@300;400;500;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="assets/css/base.css" />
    <link rel="stylesheet" href="assets/css/layout.css" />
    <link rel="stylesheet" href="assets/css/components.css" />
    <link rel="stylesheet" href="assets/css/responsive.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <header>
        <div class="header-content">
            <a href="index.php" style="text-decoration: none;">
                <div class="logo-container">
                    <img src="assets/images/logo.svg" alt="CineMax Theatre Logo" class="logo" />
                    <h1>CINEMAX</h1>
                </div>
            </a>
        </div>
    </header>

    <div class="container">
        <main class="fade-in">
            <h2>Member Registration</h2>

            <form id="registerForm" action="includes/auth/register.php" method="post">
                <div class="form-group">
                    <label for="firstName">First Name: <span style="color: #dc1f26;">*</span></label>
                    <input type="text" id="firstName" name="firstName" required="required" />
                </div>

                <div class="form-group">
                    <label for="lastName">Last Name: <span style="color: #dc1f26;">*</span></label>
                    <input type="text" id="lastName" name="lastName" required="required" />
                </div>

                <div class="form-group">
                    <label for="mailingAddress">Mailing Address: <span style="color: #dc1f26;">*</span></label>
                    <textarea id="mailingAddress" name="mailingAddress" rows="3" required="required"></textarea>
                </div>

                <div class="form-group">
                    <label for="contactPhone">Contact Phone Number: <span style="color: #dc1f26;">*</span></label>
                    <input type="tel" id="contactPhone" name="contactPhone" required="required"
                           placeholder="e.g., 98765432" />
                </div>

                <div class="form-group">
                    <label for="email">Email Address: <span style="color: #dc1f26;">*</span></label>
                    <input type="email" id="email" name="email" required="required"
                           placeholder="e.g., example@email.com" />
                </div>

                <div class="form-group">
                    <label for="password">Password: <span style="color: #dc1f26;">*</span></label>
                    <input type="password" id="password" name="password" required="required"
                           minlength="6" />
                    <small style="color: #999;">Password must be at least 6 characters long</small>
                </div>

                <div class="form-group">
                    <label for="confirmPassword">Confirm Password: <span style="color: #dc1f26;">*</span></label>
                    <input type="password" id="confirmPassword" name="confirmPassword" required="required"
                           minlength="6" />
                </div>

                <div class="btn-group">
                    <button type="submit" class="btn btn-primary">Register</button>
                    <button type="button" id="clearBtn" class="btn btn-secondary">Clear</button>
                </div>
            </form>

            <nav style="text-align: center; margin-top: 20px;">
                <a href="index.php" class="btn btn-secondary">Back to Home</a>
                <a href="login.html" class="btn btn-success">Already a Member? Login</a>
            </nav>
        </main>

        <footer>
            <p>&copy; 2025 CineMax Theatre. All rights reserved.</p>
            <p>SEHS4517 Web Application Development and Management</p>
        </footer>
    </div>

    <script>
        /**
         * Form validation and handling using JavaScript and jQuery
         */
        $(document).ready(function() {
            // Clear button functionality
            $('#clearBtn').on('click', function() {
                $('#registerForm')[0].reset();
                $('.message').remove();
            });

            // Form validation on submit
            $('#registerForm').on('submit', function(e) {
                var firstName = $('#firstName').val().trim();
                var lastName = $('#lastName').val().trim();
                var mailingAddress = $('#mailingAddress').val().trim();
                var contactPhone = $('#contactPhone').val().trim();
                var email = $('#email').val().trim();
                var password = $('#password').val();
                var confirmPassword = $('#confirmPassword').val();

                // Remove previous error messages
                $('.message').remove();

                // Validate first name
                if (firstName === '') {
                    e.preventDefault();
                    showError('First name is required');
                    return false;
                }

                // Validate last name
                if (lastName === '') {
                    e.preventDefault();
                    showError('Last name is required');
                    return false;
                }

                // Validate mailing address
                if (mailingAddress === '') {
                    e.preventDefault();
                    showError('Mailing address is required');
                    return false;
                }

                // Validate phone number (Hong Kong format)
                var phonePattern = /^[0-9]{8}$/;
                if (!phonePattern.test(contactPhone)) {
                    e.preventDefault();
                    showError('Please enter a valid 8-digit phone number');
                    return false;
                }

                // Validate email format
                var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailPattern.test(email)) {
                    e.preventDefault();
                    showError('Please enter a valid email address');
                    return false;
                }

                // Validate password length
                if (password.length < 6) {
                    e.preventDefault();
                    showError('Password must be at least 6 characters long');
                    return false;
                }

                // Validate password confirmation
                if (password !== confirmPassword) {
                    e.preventDefault();
                    showError('Passwords do not match');
                    return false;
                }

                return true;
            });

            /**
             * Function to display error message
             * @param {string} message - Error message to display
             */
            function showError(message) {
                var errorDiv = $('<div class="message message-error">' + message + '</div>');
                $('form').before(errorDiv);
                $('html, body').animate({ scrollTop: 0 }, 300);
            }

            // Add input event listeners for real-time validation feedback
            $('#password, #confirmPassword').on('input', function() {
                var password = $('#password').val();
                var confirmPassword = $('#confirmPassword').val();

                if (confirmPassword !== '' && password !== confirmPassword) {
                    $('#confirmPassword').css('border-color', '#dc1f26');
                } else {
                    $('#confirmPassword').css('border-color', '#444');
                }
            });

            // Phone number validation on input
            $('#contactPhone').on('input', function() {
                var phone = $(this).val();
                var phonePattern = /^[0-9]{8}$/;

                if (phone !== '' && !phonePattern.test(phone)) {
                    $(this).css('border-color', '#dc1f26');
                } else {
                    $(this).css('border-color', '#444');
                }
            });
        });
    </script>
</body>
</html>
